# .github/workflows/02-batch-implementation.yml
name: ğŸš€ Batch Implementation

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'  # æ¯æ—¥0æ™‚ã«å®Ÿè¡Œ

jobs:
  implement-all:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        feature: [F1, F2, F3, F4, F5, F6, F7, F8]
      max-parallel: 2  # åŒæ™‚å®Ÿè¡Œã‚’2ã¤ã«åˆ¶é™
    steps:
      - uses: actions/checkout@v4
      
      - name: Get Feature Details
        id: details
        run: |
          python3 -c "
          import yaml
          with open('voice-koereq-spec.yaml', 'r', encoding='utf-8') as f:
              spec = yaml.safe_load(f)
          feature = next(f for f in spec['features'] if f['id'] == '${{ matrix.feature }}')
          print(f\"name={feature['name']}\")
          print(f\"type={feature['type']}\")
          " >> $GITHUB_OUTPUT
      
      - name: Implement Feature ${{ matrix.feature }}
        uses: NikoToRA/claude-code-action@main
        with:
          prompt: |
            voice-koereq ã‚¢ãƒ—ãƒªã®å®Œå…¨ãªå®Ÿè£…ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

            æ©Ÿèƒ½: ${{ steps.details.outputs.name }} (${{ matrix.feature }})
            
            ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ:
            1. iOSå®Ÿè£… (SwiftUI)
            2. Androidå®Ÿè£… (Jetpack Compose)
            3. å…±æœ‰ãƒ­ã‚¸ãƒƒã‚¯ (Kotlin Multiplatform)
            4. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
            5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

            å„ãƒ•ã‚¡ã‚¤ãƒ«ã¯ production-ready ã§ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ­ã‚®ãƒ³ã‚°ã€
            ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã‚’å«ã‚ã¦ãã ã•ã„ã€‚
          output_path: implementations/${{ matrix.feature }}/